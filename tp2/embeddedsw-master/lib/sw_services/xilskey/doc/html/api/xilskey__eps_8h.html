<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>2014.1_doc: xilskey_eps.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_U_3A_2Fdoxygen_5Fpublish_2Fsources_2Fsw_5Fservices_2Fxilskey_5Fv2_5F0_2Fsrc_2Finclude_2F.html">include</a></div>
<h1>xilskey_eps.h File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8h.html#fa35f20500a9c6d1323be95841500069">XSK_EFUSEPS_RSA_KEY_HASH_LEN_IN_BYTES</a>&nbsp;&nbsp;&nbsp;(32)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8h.html#9cc2672aaa7fc5ca0ef151c2a4a81520">XilSKey_EfusePs_Write</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *PsInstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8h.html#b855763b57756001013fb6f33bca197c">XilSKey_EfusePs_Read</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *PsInstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8h.html#51d30360d0a630629d41ad31e5d8302e">XilSKey_EfusePs_ReadStatus</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *InstancePtr, u32 *StatusBits)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<dl compact><dt><b>Note:</b></dt><dd>None.</dd></dl>
MODIFICATION HISTORY:<p>
Ver Who Date Changes ----- ---- -------- -------------------------------------------------------- 1.00a rpoolla 04/26/13 First release 1.02a hk 10/28/13 Added API to read status register: u32 XilSKey_EfusePs_ReadStatus( <a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *InstancePtr, u32 *StatusBits) RSA key read back is stored in RsaKeyReadback in Instance structure instead of RsaKeyHashValue - Change in API: u32 <a class="el" href="xilskey__eps_8c.html#2149abf56ddf21b5ca0215e1a3a27354">XilSKey_EfusePs_Read(XilSKey_EPs *PsInstancePtr)</a> 2.00 hk 23/01/14 Changed PS efuse error codes for voltage out of range <hr><h2>Define Documentation</h2>
<a class="anchor" name="fa35f20500a9c6d1323be95841500069"></a><!-- doxytag: member="xilskey_eps.h::XSK_EFUSEPS_RSA_KEY_HASH_LEN_IN_BYTES" ref="fa35f20500a9c6d1323be95841500069" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define XSK_EFUSEPS_RSA_KEY_HASH_LEN_IN_BYTES&nbsp;&nbsp;&nbsp;(32)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Key length definition for RSA KEY Hash     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="b855763b57756001013fb6f33bca197c"></a><!-- doxytag: member="xilskey_eps.h::XilSKey_EfusePs_Read" ref="b855763b57756001013fb6f33bca197c" args="(XilSKey_EPs *PsInstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the PS eFUSE.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE should be burned.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS no errors occured.</li><li>Incase of error, value is as defined in xeFUSE_error.h. Error value is a combination of Upper 8 bit value and Lower 8 bit value. For example, 0x8A03 should be checked in error.h as 0x8A00 and 0x03. Upper 8 bit value signifies the major error and lower 8 bit values tells more precisely.</li></ul>
</dd></dl>
Extract PLL FDIV value from ARM PLL Control Register<p>
Extract Clock divisor value from ARM Clock Control Register<p>
Initialize the variables<p>
Check the variables<p>
XAdc Initialization<p>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
Configure the eFUSE controller with mode, strobe width values<p>
Enable eFUSE reading only<p>
Read the eFUSE<p>
Read the RSA key Hash value from eFUSE Array<p>
Disable Programming, write and read<p>
Lock the eFUSE controller     </td>
  </tr>
</table>
<a class="anchor" name="51d30360d0a630629d41ad31e5d8302e"></a><!-- doxytag: member="xilskey_eps.h::XilSKey_EfusePs_ReadStatus" ref="51d30360d0a630629d41ad31e5d8302e" args="(XilSKey_EPs *InstancePtr, u32 *StatusBits)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_ReadStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u32 *&nbsp;</td>
          <td class="mdname" nowrap> <em>StatusBits</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the PS efuse status register.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE bit should be burned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>StatusBits</em>&nbsp;</td><td>- variable to store the status register read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS.</li><li>XST_FAILURE</li></ul>
</dd></dl>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
Read the eFUSE status     </td>
  </tr>
</table>
<a class="anchor" name="9cc2672aaa7fc5ca0ef151c2a4a81520"></a><!-- doxytag: member="xilskey_eps.h::XilSKey_EfusePs_Write" ref="9cc2672aaa7fc5ca0ef151c2a4a81520" args="(XilSKey_EPs *PsInstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to write to the PS eFUSE.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE bit should be burned.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS.</li><li>Incase of error, value is as defined in xeFUSE_error.h. Error value is a combination of Upper 8 bit value and Lower 8 bit value. For example, 0x8A03 should be checked in error.h as 0x8A00 and 0x03. Upper 8 bit value signifies the major error and lower 8 bit values tells more precisely.</li></ul>
</dd></dl>
Extract PLL FDIV value from ARM PLL Control Register<p>
Extract Clock divisor value from ARM Clock Control Register<p>
Initialize the variables<p>
Check the variables<p>
XAdc Initialization<p>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
If eFUSE Array is write protected no more writes are possible<p>
Configure the eFUSE controller with mode, strobe width values.<p>
Enable Programming, write and read<p>
Initialize the timer for delay while programming the eFUSE<p>
Program the eFUSE based on the structure values<p>
Program the eFUSE bit 0xA to enable ROM 128K CRC<p>
Program the RSA key Hash value in eFUSE Array \<p>
Check if all the hash eFUSE bits are zero or not<p>
Program the RSA hash<p>
Program the eFUSE bit 0xB to enable RSA authentication<p>
Program the eFUSE bit 0x8,0x9 to enable eFUSE Array Write Protection<p>
Once enabled the write protection, we will not be able to program any PS eFUSE afterwards<p>
SLCR reset is required for write protect to take into effect<p>
Disable Programming, write and read<p>
Lock the eFUSE controller     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Feb 13 14:41:49 2014 for 2014.1_doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
