<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>2014.1_doc: xilskey_eps.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>xilskey_eps.c File Reference</h1><code>#include &quot;xil_io.h&quot;</code><br>
<code>#include &quot;xil_types.h&quot;</code><br>
<code>#include &quot;xstatus.h&quot;</code><br>
<code>#include &quot;<a class="el" href="xilskey__utils_8h.html">xilskey_utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="xilskey__epshw_8h.html">xilskey_epshw.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="xilskey__eps_8h.html">xilskey_eps.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#009424025bbf053dd1317325a69b7458">XilSKey_EfusePs_Write</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *InstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#2149abf56ddf21b5ca0215e1a3a27354">XilSKey_EfusePs_Read</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *InstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#cc9480a0a1798b481f77594e83b41d42">XilSKey_EfusePs_GenerateMatrixMap</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#24fca9c990c3b6dfd95b50e0941addfe">XilSKey_EfusePs_EccEncode</a> (const u8 *InData, u8 *Ecc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#b4a4c6fd06c5ece30d6e316bfd33a099">XilSKey_EfusePs_EccDecode</a> (const u8 *Corrupt, u8 *Syndrome)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#d45ffd29cdae8d5a2ef26d9505c8356d">XilSKey_EfusePs_ControllerConfig</a> (u8 CtrlMode, u32 RefClk, u8 ReadMode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#bbace0cee73b00a9535a3bdcd2ec45f0">XilSKey_EfusePs_IsAddressXilRestricted</a> (u32 Addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#e534e9f97d2c9e23f35466c9c26d2fa4">XilSKey_EfusePs_ControllerSetReadWriteEnable</a> (u32 ReadWriteEnable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#3cf2f142a7f4a91a54bcd35ff9802e7a">XilSKey_EfusePs_ReadEfuseBit</a> (u32 Addr, u8 *Data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#584f16ed98c0c5838545cddce386ecfc">XilSKey_EfusePs_WriteEfuseBit</a> (u32 Addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#51d30360d0a630629d41ad31e5d8302e">XilSKey_EfusePs_ReadStatus</a> (<a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *InstancePtr, u32 *StatusBits)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#d726c051c032a1ae5495253fa18dd27a">Matrix</a> [31][5]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xilskey__eps_8c.html#fb4d05b960d0c23bada55b998be3e92b">ErrorCodeIndex</a> [32]</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the PS eFUSE API's to program/read the eFUSE array.<p>
<dl compact><dt><b>Note:</b></dt><dd>None.</dd></dl>
MODIFICATION HISTORY:<p>
Ver Who Date Changes ----- ---- -------- -------------------------------------------------------- 1.00a rpoolla 04/26/13 First release 1.02a hk 10/28/13 Added API to read status register.PR# 735957 2.00 hk 23/01/14 Changed PS efuse error codes for voltage out of range. <hr><h2>Function Documentation</h2>
<a class="anchor" name="d45ffd29cdae8d5a2ef26d9505c8356d"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_ControllerConfig" ref="d45ffd29cdae8d5a2ef26d9505c8356d" args="(u8 CtrlMode, u32 RefClk, u8 ReadMode)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_ControllerConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u8&nbsp;</td>
          <td class="mdname" nowrap> <em>CtrlMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap> <em>RefClk</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u8&nbsp;</td>
          <td class="mdname" nowrap> <em>ReadMode</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to set the controller mode, read mode along with the read and program strobe width values based on the reference clock.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CtrlMode</em>&nbsp;</td><td>is the mode of the controller<ul>
<li>XSK_EFUSEPS_REDUNDANCY_MODE</li><li>XSK_EFUSEPS_SINGLE_MODE</li></ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RefClk</em>&nbsp;</td><td>is the CPU 1x reference clock frequency. Clock frequency can be between 20MHz to 100MHz specified in Hz</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ReadMode</em>&nbsp;</td><td>is the read mode of the controller<ul>
<li>XSK_EFUSEPS_READ_MODE_NORMAL</li><li>XSK_EFUSEPS_READ_MODE_MARGIN_1</li><li>XSK_EFUSEPS_READ_MODE_MARGIN_2</li></ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS no errors occured.</li><li>an error when controller mode is not supported</li><li>an error when reference clock is not supported</li><li>an error when read mode is not supported</li></ul>
</dd></dl>
Test Cases: Check single mode in CFG Reg Check redundancy mode in CFG Reg Check strobe width values for write mode Check strobe width values for various read mode Check Normal Read mode setting in CFG Reg Check Margin 1 Read mode setting in CFG Reg Check Margin 2 Read mode setting in CFG Reg Boundary Conditions<p>
Check the parameters Mode can be Single or Redundancy mode<p>
Ref Clock should be between 20MHz - 60MHz<p>
3 read modes are supported<p>
Set the controller mode<p>
Set the controller read mode<p>
Program the Strobe width values for read and write 12ms is required for write and 150ns is required for read PGM_STBW = ceiling(12us/ref_clk period) RD_STBW = ceiling(150ns/ref_clk period)     </td>
  </tr>
</table>
<a class="anchor" name="e534e9f97d2c9e23f35466c9c26d2fa4"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_ControllerSetReadWriteEnable" ref="e534e9f97d2c9e23f35466c9c26d2fa4" args="(u32 ReadWriteEnable)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void XilSKey_EfusePs_ControllerSetReadWriteEnable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ReadWriteEnable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to enable the read/write/program the eFUSE array.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ReadWriteEnable</em>&nbsp;</td><td>0x1 - Enable programming 0x2 - Enable read 0x4 - Enable write </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd></dd></dl>
Test Cases<p>
Reset the values Disable programming Disable reading Disable writing     </td>
  </tr>
</table>
<a class="anchor" name="b4a4c6fd06c5ece30d6e316bfd33a099"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_EccDecode" ref="b4a4c6fd06c5ece30d6e316bfd33a099" args="(const u8 *Corrupt, u8 *Syndrome)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u8 XilSKey_EfusePs_EccDecode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const u8 *&nbsp;</td>
          <td class="mdname" nowrap> <em>Corrupt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u8 *&nbsp;</td>
          <td class="mdname" nowrap> <em>Syndrome</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to decode the incoming encoded byte.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Corrupt</em>&nbsp;</td><td>is the input encoded data. It has 26 bit data with 5 bit parity data</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Syndrome</em>&nbsp;</td><td>is the output updated with the parity error information.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>position of the error in the data byte</dd></dl>
TDD Cases: Check the parameters Check the decode with out any error Check the decode with 1 bit error Check the decode with 2 bit error Check the decode for boundary cases Check for memory corruption     </td>
  </tr>
</table>
<a class="anchor" name="24fca9c990c3b6dfd95b50e0941addfe"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_EccEncode" ref="24fca9c990c3b6dfd95b50e0941addfe" args="(const u8 *InData, u8 *Ecc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void XilSKey_EfusePs_EccEncode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const u8 *&nbsp;</td>
          <td class="mdname" nowrap> <em>InData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u8 *&nbsp;</td>
          <td class="mdname" nowrap> <em>Ecc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to encode the incoming data byte. It uses hamming (31,26) algorithm. 26 bits are encoded to 31 bits<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InData</em>&nbsp;</td><td>is 26 bit input data with each bit represented in one byte</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Ecc</em>&nbsp;</td><td>is the 31 bit encoded data with each bit represented in one byte</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>None</dd></dl>
TDD Cases: Check the parameters Check the encoded data for different input data Check the input data for boundary cases Check for memory corruption     </td>
  </tr>
</table>
<a class="anchor" name="cc9480a0a1798b481f77594e83b41d42"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_GenerateMatrixMap" ref="cc9480a0a1798b481f77594e83b41d42" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void XilSKey_EfusePs_GenerateMatrixMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to generate the matrix map of the G and H for hamming code (31,26). G is [31,5] and defined as [A|I], I is identity matrix of [5,5].<p>
<dl compact><dt><b>Returns:</b></dt><dd>None</dd></dl>
TDD Cases: Check the generated matrix Check the memory corruption of the generated matrix     </td>
  </tr>
</table>
<a class="anchor" name="bbace0cee73b00a9535a3bdcd2ec45f0"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_IsAddressXilRestricted" ref="bbace0cee73b00a9535a3bdcd2ec45f0" args="(u32 Addr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u8 XilSKey_EfusePs_IsAddressXilRestricted           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Addr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to check whether eFuse bit is xilinx reserved bit or not<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>is the address of the eFuse bit.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if address corresponds to restricted eFuse bit.</li><li>XST_FAILURE is address corresponds to non-restricted eFuse bit.</li></ul>
</dd></dl>
Test Cases: with different address values Boundary values for addr<p>
Check for xilinx test bits<p>
Check for xilinx reserved bits     </td>
  </tr>
</table>
<a class="anchor" name="2149abf56ddf21b5ca0215e1a3a27354"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_Read" ref="2149abf56ddf21b5ca0215e1a3a27354" args="(XilSKey_EPs *InstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_Read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the PS eFUSE.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE should be burned.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS no errors occured.</li><li>Incase of error, value is as defined in xeFUSE_error.h. Error value is a combination of Upper 8 bit value and Lower 8 bit value. For example, 0x8A03 should be checked in error.h as 0x8A00 and 0x03. Upper 8 bit value signifies the major error and lower 8 bit values tells more precisely.</li></ul>
</dd></dl>
Extract PLL FDIV value from ARM PLL Control Register<p>
Extract Clock divisor value from ARM Clock Control Register<p>
Initialize the variables<p>
Check the variables<p>
XAdc Initialization<p>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
Configure the eFUSE controller with mode, strobe width values<p>
Enable eFUSE reading only<p>
Read the eFUSE<p>
Read the RSA key Hash value from eFUSE Array<p>
Disable Programming, write and read<p>
Lock the eFUSE controller     </td>
  </tr>
</table>
<a class="anchor" name="3cf2f142a7f4a91a54bcd35ff9802e7a"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_ReadEfuseBit" ref="3cf2f142a7f4a91a54bcd35ff9802e7a" args="(u32 Addr, u8 *Data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_ReadEfuseBit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u8 *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the eFuse bit value. Before using this function set the controller mode and read mode as required. Also, strobe width values are to be set properly based on the reference clock for successful reading<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>is the address of the eFuse bit.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>has the read eFuse value stored in it.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS for succesfully reading the value.</li><li>an error when addr is restricted</li></ul>
</dd></dl>
Test Cases Read in Single mode Read in redundancy mode Read for restricted address Boundary Checks for address     </td>
  </tr>
</table>
<a class="anchor" name="51d30360d0a630629d41ad31e5d8302e"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_ReadStatus" ref="51d30360d0a630629d41ad31e5d8302e" args="(XilSKey_EPs *InstancePtr, u32 *StatusBits)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_ReadStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u32 *&nbsp;</td>
          <td class="mdname" nowrap> <em>StatusBits</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to read the PS efuse status register.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE bit should be burned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>StatusBits</em>&nbsp;</td><td>- variable to store the status register read.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS.</li><li>XST_FAILURE</li></ul>
</dd></dl>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
Read the eFUSE status     </td>
  </tr>
</table>
<a class="anchor" name="009424025bbf053dd1317325a69b7458"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_Write" ref="009424025bbf053dd1317325a69b7458" args="(XilSKey_EPs *InstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_Write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_xil_s_key___e_ps.html">XilSKey_EPs</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to write to the PS eFUSE.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the PsEfuseHandle which describes which PS eFUSE bit should be burned.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS.</li><li>Incase of error, value is as defined in xeFUSE_error.h. Error value is a combination of Upper 8 bit value and Lower 8 bit value. For example, 0x8A03 should be checked in error.h as 0x8A00 and 0x03. Upper 8 bit value signifies the major error and lower 8 bit values tells more precisely.</li></ul>
</dd></dl>
Extract PLL FDIV value from ARM PLL Control Register<p>
Extract Clock divisor value from ARM Clock Control Register<p>
Initialize the variables<p>
Check the variables<p>
XAdc Initialization<p>
Unlock the eFUSE controller<p>
Check if the controller is unlocked<p>
If eFUSE Array is write protected no more writes are possible<p>
Configure the eFUSE controller with mode, strobe width values.<p>
Enable Programming, write and read<p>
Initialize the timer for delay while programming the eFUSE<p>
Program the eFUSE based on the structure values<p>
Program the eFUSE bit 0xA to enable ROM 128K CRC<p>
Program the RSA key Hash value in eFUSE Array \<p>
Check if all the hash eFUSE bits are zero or not<p>
Program the RSA hash<p>
Program the eFUSE bit 0xB to enable RSA authentication<p>
Program the eFUSE bit 0x8,0x9 to enable eFUSE Array Write Protection<p>
Once enabled the write protection, we will not be able to program any PS eFUSE afterwards<p>
SLCR reset is required for write protect to take into effect<p>
Disable Programming, write and read<p>
Lock the eFUSE controller     </td>
  </tr>
</table>
<a class="anchor" name="584f16ed98c0c5838545cddce386ecfc"></a><!-- doxytag: member="xilskey_eps.c::XilSKey_EfusePs_WriteEfuseBit" ref="584f16ed98c0c5838545cddce386ecfc" args="(u32 Addr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XilSKey_EfusePs_WriteEfuseBit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Addr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to program the eFuse bit value. Before using this function set the controller mode and read mode as required. Also, strobe width values are to be set properly based on the reference clock for successful programming<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>is the address of the eFuse bit.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS after successful writing.</li><li>an error when addr is restricted</li></ul>
</dd></dl>
Test Cases Write in Single mode Write in redundancy mode Write for restricted address Boundary Checks for address Strobe width are not proper (Check if it makes sense)<p>
Check if Address is restricted<p>
Send success when bit is already programmed<p>
Providing 15us delay Timer takes 100ns as slice. 15us = 150 * 100ns     </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="fb4d05b960d0c23bada55b998be3e92b"></a><!-- doxytag: member="xilskey_eps.c::ErrorCodeIndex" ref="fb4d05b960d0c23bada55b998be3e92b" args="[32]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u8 <a class="el" href="xilskey__eps_8c.html#fb4d05b960d0c23bada55b998be3e92b">ErrorCodeIndex</a>[32]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Error Code Array     </td>
  </tr>
</table>
<a class="anchor" name="d726c051c032a1ae5495253fa18dd27a"></a><!-- doxytag: member="xilskey_eps.c::Matrix" ref="d726c051c032a1ae5495253fa18dd27a" args="[31][5]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u8 <a class="el" href="xilskey__eps_8c.html#d726c051c032a1ae5495253fa18dd27a">Matrix</a>[31][5]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PS eFUSE Matrix     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Feb 13 14:41:49 2014 for 2014.1_doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
