<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   xscaler_coefs.c File Reference
</title>
<link href="$DriverApiDocsCssPath" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>xscaler_coefs.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains Lanczos coefficient generation for use in the Xilinx Video Scaler.<p>
<pre>
 MODIFICATION HISTORY:</pre><p>
<pre> Ver   Who  Date     Changes
 ----- ---- -------- -------------------------------------------------------
 1.00a xd   06/15/09 First release. Coefficients are auto-generated in
                     Matlab using
                     /Video_Scaler/reference_model/src/CreateCoefficients.m
 2.00a xd   12/14/09 Updated doxygen document tags
 5.00a mpv  12/13/13 Updated to dynamic coeff generation to reduce driver size
 7.0   adk  08/22/14 Removed typedef unsigned short s16 as it was already
                     defined in xil_types.h.
                     Updated doxygen document tags.
                     XScaler_coef_table is made as a global variable.
                     Memory allocated was freed after usage.
 </pre> 
<p>
<code>#include &quot;<a class="el" href="xscaler_8h.html">xscaler.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcoefs__struct.html">coefs_struct</a></td></tr>

<tr><td colspan="2"><br><h2>PI definition</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#598a3330b3c21701223ee0ca14316eca">PI</a>&nbsp;&nbsp;&nbsp;3.14159265358979</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#473f61cffa8975d0d6dfe8083dcfcc52">XScaler_AllocCoefsBuff</a> (struct <a class="el" href="structcoefs__struct.html">coefs_struct</a> *Coefs, u32 Max_Taps, u32 Max_Phases)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#febe13974f673bd353037006d03c0b9c">XScaler_Sine</a> (float x)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#1d67001f95f90ad1bdbcc8186ad0a824">XScaler_Lanczos</a> (float x, int a)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#6caf402acf9848ad358b8d918e2d354d">XScaler_GetLanczosCoeffs</a> (float p, short int icoeffs[], int NCOEFF)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">s16 *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#41df88fbe58daded2ac713e7cc5a4ec0">XScaler_GenCoefTable</a> (u32 Tap, u32 Phase)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">u16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#59e75ae65e791e6f8c59aea4251a6c9e">XScaler_CoefficientBinScalingFactors</a> [XSCL_NUM_COEF_BINS]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">s16 *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#448998c4ce39ec903fc04ffbe8cb0161">XScaler_coef_table</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structcoefs__struct.html">coefs_struct</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xscaler__coefs_8c.html#af5a78fec6845b67745dc67738eeceb4">SingleFrameCoefs</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="598a3330b3c21701223ee0ca14316eca"></a><!-- doxytag: member="xscaler_coefs.c::PI" ref="598a3330b3c21701223ee0ca14316eca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI&nbsp;&nbsp;&nbsp;3.14159265358979          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="473f61cffa8975d0d6dfe8083dcfcc52"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_AllocCoefsBuff" ref="473f61cffa8975d0d6dfe8083dcfcc52" args="(struct coefs_struct *Coefs, u32 Max_Taps, u32 Max_Phases)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XScaler_AllocCoefsBuff           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcoefs__struct.html">coefs_struct</a> *&nbsp;</td>
          <td class="paramname"> <em>Coefs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Max_Taps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Max_Phases</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function allocates memory to a double dimensional array.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Coefs</em>&nbsp;</td><td>is a pointer to Coefs_Struct structure which has a double dimensional array which needs to be allocated memory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Max_Taps</em>&nbsp;</td><td>indicates the number of taps which is used to allocate that number of columns. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Max_Phases</em>&nbsp;</td><td>indicates the number of phases which is used to allocate that number of rows.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>1 - Indicates allocation of memory is failed. 0 - Indicates allocation of memory is success.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div><p>
<a class="anchor" name="41df88fbe58daded2ac713e7cc5a4ec0"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_GenCoefTable" ref="41df88fbe58daded2ac713e7cc5a4ec0" args="(u32 Tap, u32 Phase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s16* XScaler_GenCoefTable           </td>
          <td>(</td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Tap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Phase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function generates a table that contains the coefficient values for scaling operations<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Tap</em>&nbsp;</td><td>indicates the number of taps configured to the Scaler device. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Phase</em>&nbsp;</td><td>indicates the number of phase configured to the Scaler device.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The pointer to XScaler_Coef_Table.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div><p>
<a class="anchor" name="6caf402acf9848ad358b8d918e2d354d"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_GetLanczosCoeffs" ref="6caf402acf9848ad358b8d918e2d354d" args="(float p, short int icoeffs[], int NCOEFF)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XScaler_GetLanczosCoeffs           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&nbsp;</td>
          <td class="paramname"> <em>icoeffs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>NCOEFF</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This coefficient generation algorithm implements the Lanczos coefficients. For a particular scaling ratio, the coefficients can be pre-canned to memory.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>is a float variable. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>icoeffs</em>&nbsp;</td><td>is a pointer to a single row of Coefficients array which is in SingleFrameCoefs structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NCOEFF</em>&nbsp;</td><td>is variable which holds number of taps which indicates the number of columns</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>None.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>It works according to <a href="http://en.wikipedia.org/wiki/Lanczos_resampling.">http://en.wikipedia.org/wiki/Lanczos_resampling.</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1d67001f95f90ad1bdbcc8186ad0a824"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_Lanczos" ref="1d67001f95f90ad1bdbcc8186ad0a824" args="(float x, int a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float XScaler_Lanczos           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>a</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function generates coffficient.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>is a float varaible based on which coefficient is generated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>is a 32 bit variable which holds half of the number of taps.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Returns Coefficient value depending on inputs.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>It works according to <a href="http://en.wikipedia.org/wiki/Taylor_series#Approximation_and_convergence">http://en.wikipedia.org/wiki/Taylor_series#Approximation_and_convergence</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="febe13974f673bd353037006d03c0b9c"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_Sine" ref="febe13974f673bd353037006d03c0b9c" args="(float x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float XScaler_Sine           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>x</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This Sine generation algorithm implements Taylor series decomposition of the Sine function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>is a float variable which needs to be set.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Returns Taylor series.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>It works according to <a href="http://en.wikipedia.org/wiki/Taylor_series#Approximation_and_convergence">http://en.wikipedia.org/wiki/Taylor_series#Approximation_and_convergence</a> </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="af5a78fec6845b67745dc67738eeceb4"></a><!-- doxytag: member="xscaler_coefs.c::SingleFrameCoefs" ref="af5a78fec6845b67745dc67738eeceb4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcoefs__struct.html">coefs_struct</a> <a class="el" href="xscaler__coefs_8c.html#af5a78fec6845b67745dc67738eeceb4">SingleFrameCoefs</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This structure contains a pointer to double dimensional array which will be filled by coefficients. 
</div>
</div><p>
<a class="anchor" name="448998c4ce39ec903fc04ffbe8cb0161"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_coef_table" ref="448998c4ce39ec903fc04ffbe8cb0161" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s16* <a class="el" href="xscaler__coefs_8c.html#448998c4ce39ec903fc04ffbe8cb0161">XScaler_coef_table</a> = NULL          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Coefficients table 
</div>
</div><p>
<a class="anchor" name="59e75ae65e791e6f8c59aea4251a6c9e"></a><!-- doxytag: member="xscaler_coefs.c::XScaler_CoefficientBinScalingFactors" ref="59e75ae65e791e6f8c59aea4251a6c9e" args="[XSCL_NUM_COEF_BINS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 <a class="el" href="xscaler__coefs_8c.html#59e75ae65e791e6f8c59aea4251a6c9e">XScaler_CoefficientBinScalingFactors</a>[XSCL_NUM_COEF_BINS]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        20000,
        625,
        1250,
        1875,
        2500,
        3125,
        3750,
        4375,
        5000,
        5625,
        6250,
        6875,
        7500,
        8125,
        8750,
        9375,
        10000,
        10000,
        6666
}
</pre></div>XScaler_CoefficientsBinScalingFactors contains scaling factors calculated using (Output_Size * 10000 / Input_Size). This table could help find the index of coefficient Bin given an input size and a output size. 
</div>
</div><p>
Copyright @ 1995-2014 Xilinx, Inc. All rights reserved. 
