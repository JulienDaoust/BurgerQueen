<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   Xilinx Driver iic v3_0: xiic_dyn_master.c File Reference
</title>
<link href="doxygen_kalyanidocs/doc/css/driver_api_doxygen.css" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">

<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>xiic_dyn_master.c File Reference</h1><code>#include &quot;<a class="el" href="xiic_8h.html">xiic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xiic__i_8h.html">xiic_i.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xiic__dyn__master_8c.html#a4bdf2d43cbd68f55dbec0faab818b6ed">XIIC_DYN_MASTER_INCLUDE</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xiic__dyn__master_8c.html#ac4c6388d0db3b08ddcd47f0b2459ff3c">XIic_DynMasterSend</a> (<a class="el" href="struct_x_iic.html">XIic</a> *InstancePtr, u8 *TxMsgPtr, u8 ByteCount)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xiic__dyn__master_8c.html#a4d7985d95cd029ab0b0f2a5ccc614793">XIic_DynMasterRecv</a> (<a class="el" href="struct_x_iic.html">XIic</a> *InstancePtr, u8 *RxMsgPtr, u8 ByteCount)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xiic__dyn__master_8c.html#a6f86310d413cbe343462b6488f1cf8ab">XIic_DynamicInitialize</a> (<a class="el" href="struct_x_iic.html">XIic</a> *InstancePtr)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Contains master functions for the <a class="el" href="struct_x_iic.html">XIic</a> component in Dynamic controller mode. This file is necessary to send or receive as a master on the IIC bus.</p>
<pre>
 MODIFICATION HISTORY:</pre><pre> Ver   Who  Date     Changes
 ----- --- ------- -----------------------------------------------------------
 1.03a mta 04/10/06 Created.
 1.13a wgr 03/22/07 Converted to new coding style.
 2.00a ktn 10/22/09 Converted all register accesses to 32 bit access.
		     Updated to use the HAL APIs/macros. The macros
		     XIic_mDynSend7BitAddress and XIic_mDynSendStop have
		     been removed from this file as they were already
		     defined in a header file.
		     Some of the macros have been renamed to remove _m from
		     the name and Some of the macros have been renamed to be
		     consistent, see the <a class="el" href="xiic__l_8h.html">xiic_l.h</a> file for further information.
 </pre> <hr/><h2>Define Documentation</h2>
<a class="anchor" id="a4bdf2d43cbd68f55dbec0faab818b6ed"></a><!-- doxytag: member="xiic_dyn_master.c::XIIC_DYN_MASTER_INCLUDE" ref="a4bdf2d43cbd68f55dbec0faab818b6ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XIIC_DYN_MASTER_INCLUDE</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{                                                                       \
        <a class="code" href="xiic__i_8h.html#a6fcd6cf98cb6c668f7b325b1d11bf80b">XIic_RecvMasterFuncPtr</a> = DynRecvMasterData;                     \
        <a class="code" href="xiic__i_8h.html#a6affd51ad0369eabd5457cea02923379">XIic_SendMasterFuncPtr</a> = DynSendMasterData;                     \
}
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a6f86310d413cbe343462b6488f1cf8ab"></a><!-- doxytag: member="xiic_dyn_master.c::XIic_DynamicInitialize" ref="a6f86310d413cbe343462b6488f1cf8ab" args="(XIic *InstancePtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XIic_DynamicInitialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_iic.html">XIic</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d7985d95cd029ab0b0f2a5ccc614793"></a><!-- doxytag: member="xiic_dyn_master.c::XIic_DynMasterRecv" ref="a4d7985d95cd029ab0b0f2a5ccc614793" args="(XIic *InstancePtr, u8 *RxMsgPtr, u8 ByteCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XIic_DynMasterRecv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_iic.html">XIic</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>RxMsgPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>ByteCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function receives data as a master from a slave device on the IIC bus. If the bus is busy, it will indicate so and then enable an interrupt such that the status handler will be called when the bus is no longer busy. The slave address which has been set with the <a class="el" href="xiic_8c.html#ad944f42c3d9972fc2c986a7eed726297">XIic_SetAddress()</a> function is the address from which data is received. Receiving data on the bus performs a read operation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the Iic instance to be worked on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RxMsgPtr</em>&nbsp;</td><td>is a pointer to the data to be transmitted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ByteCount</em>&nbsp;</td><td>is the number of message bytes to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>- XST_SUCCESS indicates the message reception processes has been initiated.<ul>
<li>XST_IIC_BUS_BUSY indicates the bus was in use and that the BusNotBusy interrupt is enabled which will update the EventStatus when the bus is no longer busy.</li>
<li>XST_IIC_GENERAL_CALL_ADDRESS indicates the slave address is set to the general call address. This is not allowed for Master receive mode.</li>
</ul>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The receive FIFO threshold is a zero based count such that 1 must be subtracted from the desired count to get the correct value. When receiving data it is also necessary to not receive the last byte with the prior bytes because the acknowledge must be setup before the last byte is received. </dd></dl>

</div>
</div>
<a class="anchor" id="ac4c6388d0db3b08ddcd47f0b2459ff3c"></a><!-- doxytag: member="xiic_dyn_master.c::XIic_DynMasterSend" ref="ac4c6388d0db3b08ddcd47f0b2459ff3c" args="(XIic *InstancePtr, u8 *TxMsgPtr, u8 ByteCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XIic_DynMasterSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_iic.html">XIic</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>TxMsgPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>ByteCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function sends data as a Dynamic master on the IIC bus. If the bus is busy, it will indicate so and then enable an interrupt such that the status handler will be called when the bus is no longer busy. The slave address is sent by using <a class="el" href="xiic__l_8h.html#a81d32f9fd29736e9f9c7ef345527386b">XIic_DynSend7BitAddress()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>points to the Iic instance to be worked on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TxMsgPtr</em>&nbsp;</td><td>points to the data to be transmitted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ByteCount</em>&nbsp;</td><td>is the number of message bytes to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>XST_SUCCESS if successful else XST_FAILURE.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
</div>
<p class="Copyright">
Copyright &copy; 1995-2014 Xilinx, Inc. All rights reserved.
</p>
</body>
</html>
