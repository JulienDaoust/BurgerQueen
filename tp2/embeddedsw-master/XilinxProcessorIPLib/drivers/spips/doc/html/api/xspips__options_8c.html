<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   Xilinx Driver spips v2_0: xspips_options.c File Reference
</title>
<link href="doxygen_kalyanidocs/doc/css/driver_api_doxygen.css" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">

<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>xspips_options.c File Reference</h1><code>#include &quot;<a class="el" href="xspips_8h.html">xspips.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_options_map.html">OptionsMap</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a7c4848f8ba03351f004a99021099759d">XSPIPS_NUM_OPTIONS</a>&nbsp;&nbsp;&nbsp;(sizeof(OptionsTable) / sizeof(<a class="el" href="struct_options_map.html">OptionsMap</a>))</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a015440ddc36b8c4787730d9513567b19">XSpiPs_SetOptions</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr, u32 Options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a842e4cf2fabf1849f451d9592d0b2722">XSpiPs_GetOptions</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a4f3e0643c808f4cb2ecebc44ca3225eb">XSpiPs_SetClkPrescaler</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr, u8 Prescaler)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#ab8f7c1eb75848839d7dc4fa81bc273e4">XSpiPs_GetClkPrescaler</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a92eba2fca7abff03bd2139ea5aa39f73">XSpiPs_SetDelays</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr, u8 DelayNss, u8 DelayBtwn, u8 DelayAfter, u8 DelayInit)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xspips__options_8c.html#a716d3d27606e693e765a2b9d01cce462">XSpiPs_GetDelays</a> (<a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *InstancePtr, u8 *DelayNss, u8 *DelayBtwn, u8 *DelayAfter, u8 *DelayInit)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Contains functions for the configuration of the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> driver.</p>
<pre>
 MODIFICATION HISTORY:</pre><pre> Ver   Who    Date     Changes
 ----- ------ -------- -----------------------------------------------
 1.00  drg/jz 01/25/10 First release
 1.00	sdm    10/25/11 Removed the Divide by 2 in the SPI Clock Prescaler
			options as this is not supported in the device
 1.04a	sg     01/30/13 Added XSPIPS_MANUAL_START_OPTION. SetDelays and
			GetDelays API's include DelayNss parameter.
 1.05a hk 	   26/04/13 Added disable and enable in XSpiPs_SetOptions when
				CPOL/CPHA bits are set/reset. Fix for CR#707669.</pre><pre> </pre> <hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7c4848f8ba03351f004a99021099759d"></a><!-- doxytag: member="xspips_options.c::XSPIPS_NUM_OPTIONS" ref="a7c4848f8ba03351f004a99021099759d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XSPIPS_NUM_OPTIONS&nbsp;&nbsp;&nbsp;(sizeof(OptionsTable) / sizeof(<a class="el" href="struct_options_map.html">OptionsMap</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab8f7c1eb75848839d7dc4fa81bc273e4"></a><!-- doxytag: member="xspips_options.c::XSpiPs_GetClkPrescaler" ref="ab8f7c1eb75848839d7dc4fa81bc273e4" args="(XSpiPs *InstancePtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 XSpiPs_GetClkPrescaler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function gets the clock prescaler of an SPI device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The prescaler value.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a716d3d27606e693e765a2b9d01cce462"></a><!-- doxytag: member="xspips_options.c::XSpiPs_GetDelays" ref="a716d3d27606e693e765a2b9d01cce462" args="(XSpiPs *InstancePtr, u8 *DelayNss, u8 *DelayBtwn, u8 *DelayAfter, u8 *DelayInit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XSpiPs_GetDelays </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>DelayNss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>DelayBtwn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>DelayAfter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&nbsp;</td>
          <td class="paramname"> <em>DelayInit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function gets the delay settings for an SPI device. The delay register controls the Delay Between Transfers, Delay After Transfers, and the Delay Initially. The default value is 0x0.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayNss</em>&nbsp;</td><td>is a pointer to the delay for which the chip select outputs will be de-asserted between words when CPHA=0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayBtwn</em>&nbsp;</td><td>is a pointer to the Delay Between transfers value. This is a return parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayAfter</em>&nbsp;</td><td>is a pointer to the Delay After transfer value. This is a return parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayInit</em>&nbsp;</td><td>is a pointer to the Delay Initially value. This is a return parameter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>None.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a842e4cf2fabf1849f451d9592d0b2722"></a><!-- doxytag: member="xspips_options.c::XSpiPs_GetOptions" ref="a842e4cf2fabf1849f451d9592d0b2722" args="(XSpiPs *InstancePtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u32 XSpiPs_GetOptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function gets the options for the SPI device. The options control how the device behaves relative to the SPI bus.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<p>Options contains the specified options currently set. This is a bit value where a 1 means the option is on, and a 0 means the option is off. See the bit definitions named XSPIPS_*_OPTIONS in file <a class="el" href="xspips_8h.html">xspips.h</a>.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a4f3e0643c808f4cb2ecebc44ca3225eb"></a><!-- doxytag: member="xspips_options.c::XSpiPs_SetClkPrescaler" ref="a4f3e0643c808f4cb2ecebc44ca3225eb" args="(XSpiPs *InstancePtr, u8 Prescaler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XSpiPs_SetClkPrescaler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>Prescaler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function sets the clock prescaler for an SPI device. The device must be idle rather than busy transferring data before setting these device options.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Prescaler</em>&nbsp;</td><td>is the value that determine how much the clock should be divided by. Use the XSPIPS_CLK_PRESCALE_* constants defined in <a class="el" href="xspips_8h.html">xspips.h</a> for this setting.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if options are successfully set.</li>
<li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting options.</li>
</ul>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is not thread-safe. </dd></dl>

</div>
</div>
<a class="anchor" id="a92eba2fca7abff03bd2139ea5aa39f73"></a><!-- doxytag: member="xspips_options.c::XSpiPs_SetDelays" ref="a92eba2fca7abff03bd2139ea5aa39f73" args="(XSpiPs *InstancePtr, u8 DelayNss, u8 DelayBtwn, u8 DelayAfter, u8 DelayInit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XSpiPs_SetDelays </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>DelayNss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>DelayBtwn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>DelayAfter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>DelayInit</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function sets the delay register for the SPI device driver. The delay register controls the Delay Between Transfers, Delay After Transfers, and the Delay Initially. The default value is 0x0. The range of each delay value is 0-255.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayNss</em>&nbsp;</td><td>is the delay for which the chip select outputs will be de-asserted between words when CPHA=0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayBtwn</em>&nbsp;</td><td>is the delay between one Slave Select being de-activated and the activation of another slave. The delay is the number of master clock periods given by DelayBtwn + 2. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayAfter</em>&nbsp;</td><td>define the delay between the last bit of the current byte transfer and the first bit of the next byte transfer. The delay in number of master clock periods is given as: CPHA=0:DelayInit+DelayAfter+3 CPHA=1:DelayAfter+1 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DelayInit</em>&nbsp;</td><td>is the delay between asserting the slave select signal and the first bit transfer. The delay int number of master clock periods is DelayInit+1.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if delays are successfully set.</li>
<li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting options.</li>
</ul>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a015440ddc36b8c4787730d9513567b19"></a><!-- doxytag: member="xspips_options.c::XSpiPs_SetOptions" ref="a015440ddc36b8c4787730d9513567b19" args="(XSpiPs *InstancePtr, u32 Options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XSpiPs_SetOptions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_spi_ps.html">XSpiPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function sets the options for the SPI device driver. The options control how the device behaves relative to the SPI bus. The device must be idle rather than busy transferring data before setting these device options.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_spi_ps.html">XSpiPs</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Options</em>&nbsp;</td><td>contains the specified options to be set. This is a bit mask where a 1 means to turn the option on, and a 0 means to turn the option off. One or more bit values may be contained in the mask. See the bit definitions named XSPIPS_*_OPTIONS in the file <a class="el" href="xspips_8h.html">xspips.h</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if options are successfully set.</li>
<li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting options.</li>
</ul>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function is not thread-safe. </dd></dl>

</div>
</div>
</div>
<p class="Copyright">
Copyright &copy; 1995-2014 Xilinx, Inc. All rights reserved.
</p>
</body>
</html>
