<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   Xilinx Driver nandps v2_1: xnandps_bbm.h File Reference
</title>
<link href="doxygen_kalyanidocs/doc/css/driver_api_doxygen.css" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">

<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>xnandps_bbm.h File Reference</h1><code>#include &quot;<a class="el" href="xnandps_8h.html">xnandps.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a6ed742001748dc3dce1411716660b1e3">BBM_H</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a8ffc4c5be52b4ca7d07c2b5a159bec99">XNANDPS_BLOCK_GOOD</a>&nbsp;&nbsp;&nbsp;0x0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a52a13ba6c5dc5ae22cad93b73ec66503">XNANDPS_BLOCK_BAD</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#aa6ac6d803ac18454c61045a7aef97920">XNANDPS_BLOCK_RESERVED</a>&nbsp;&nbsp;&nbsp;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#ad4781005bbcccdccba1bd02497925ec4">XNANDPS_BLOCK_FACTORY_BAD</a>&nbsp;&nbsp;&nbsp;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#acd3b0fdad08c44639c327ad0afdc1b7e">XNANDPS_FLASH_BLOCK_GOOD</a>&nbsp;&nbsp;&nbsp;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a27509962745af9175e06726f033d0796">XNANDPS_FLASH_BLOCK_BAD</a>&nbsp;&nbsp;&nbsp;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#aab0ab3b8f4cc986ba9c7e2ddea945190">XNANDPS_FLASH_BLOCK_RESERVED</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a54d601640a21f22188696844fc7b312c">XNANDPS_FLASH_BLOCK_FACTORY_BAD</a>&nbsp;&nbsp;&nbsp;0x0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a5457296025d8fd9a120bb91e9d758127">XNANDPS_BBT_SCAN_2ND_PAGE</a>&nbsp;&nbsp;&nbsp;0x00000001</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a4b345667d0e5773945afba7f32e71197">XNANDPS_BBT_DESC_PAGE_OFFSET</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a574ae11e1b61cbe8c252809811b7e9a4">XNANDPS_BBT_DESC_SIG_OFFSET</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#aab896c9f1fca0c7c89748f5e8fef9f28">XNANDPS_BBT_DESC_VER_OFFSET</a>&nbsp;&nbsp;&nbsp;12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a13ccee0248f97c8797d2d8cc91c9c235">XNANDPS_BBT_DESC_SIG_LEN</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a7ea379639132add0b9fa16f9f5faddc9">XNANDPS_BBT_DESC_MAX_BLOCKS</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a6b09191846a32df39daaa50cb7e7ab0a">XNANDPS_BBT_BLOCK_SHIFT</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a7bdde5a8f13f65b23cc2d3382c8ab884">XNANDPS_BBT_ENTRY_NUM_BLOCKS</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a923e66dcd7aa633f9d7834f37366a7ef">XNANDPS_BB_PATTERN_OFFSET_SMALL_PAGE</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#afed66cfe949f16e69c3a99b0183183d9">XNANDPS_BB_PATTERN_LENGTH_SMALL_PAGE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#abc8529210c261e24ffbeae2ec2774702">XNANDPS_BB_PATTERN_OFFSET_LARGE_PAGE</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a89b88c9d4f553dcac407ca987afaa775">XNANDPS_BB_PATTERN_LENGTH_LARGE_PAGE</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a7f1a2e914cdaa10ad2c730958cbffc98">XNANDPS_BB_PATTERN</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#ac547ca7c91b79d5437cf58f29c0fda1e">XNANDPS_BLOCK_TYPE_MASK</a>&nbsp;&nbsp;&nbsp;0x03</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#af7c432bad01dd727f91f1f0435f92cac">XNANDPS_BLOCK_SHIFT_MASK</a>&nbsp;&nbsp;&nbsp;0x06</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a820a56f0443165ef4e45daafb8bfb604">XNandPs_BbtBlockShift</a>(Block)&nbsp;&nbsp;&nbsp;((Block * 2) &amp; XNANDPS_BLOCK_SHIFT_MASK)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a5744d2e6e03eb2b815771cf660ab2e11">XNandPs_IsBlockBad</a> (<a class="el" href="struct_x_nand_ps_tag.html">XNandPs</a> *InstancePtr, u32 Block)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xnandps__bbm_8h.html#a65ec4f2496ae641d1306089dff5416b2">XNandPs_MarkBlockBad</a> (<a class="el" href="struct_x_nand_ps_tag.html">XNandPs</a> *InstancePtr, u32 Block)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This file implements the Bad Block Management(BBM) functionality. This is similar to the Bad Block Management which is a part of the MTD subsystem in Linux. The factory marked bad blocks are scanned initially and a Bad Block Table(BBT) is created in the memory. This table is also written to the flash so that upon reboot, the BBT is read back from the flash and loaded into the memory instead of scanning every time. The Bad Block Table(BBT) is written into one of the the last four blocks in the flash memory. The last four blocks are marked as Reserved so that user can't erase/program those blocks.</p>
<p>There are two bad block tables, a primary table and a mirror table. The tables are versioned and incrementing version number is used to detect and recover from interrupted updates. Each table is stored in a separate block, beginning in the first page of that block. Only two blocks would be necessary in the absence of bad blocks within the last four; the range of four provides a little slack in case one or two of those blocks is bad. These blocks are marked as reserved and cannot be programmed by the user. A NAND Flash device with 3 or more factory bad blocks in the last 4 cannot be used. The bad block table signature is written into the spare data area of the pages containing bad block table so that upon rebooting the bad block table signature is searched and the bad block table is loaded into RAM. The signature is "Bbt0" for primary Bad Block Table and "1tbB" for Mirror Bad Block Table. The version offset follows the signature offset in the spare data area. The version number increments on every update to the bad block table and the version wraps at 0xff.</p>
<p>Each block in the Bad Block Table(BBT) is represented by 2 bits. The two bits are encoded as follows in RAM BBT. 0'b00 -&gt; Good Block 0'b01 -&gt; Block is bad due to wear 0'b10 -&gt; Reserved block 0'b11 -&gt; Factory marked bad block</p>
<p>While writing to the flash the two bits are encoded as follows. 0'b00 -&gt; Factory marked bad block 0'b01 -&gt; Reserved block 0'b10 -&gt; Block is bad due to wear 0'b11 -&gt; Good Block</p>
<p>The user can check for the validity of the block using the API XNandPs_IsBlockBad and take the action based on the return value. Also user can update the bad block table using XNandPs_MarkBlockBad API.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>None</dd></dl>
<pre>
 MODIFICATION HISTORY:</pre><pre> Ver   Who    Date    	   Changes
 ----- ----   ----------  -----------------------------------------------
 1.00a nm     12/10/2010  First release
 </pre> <hr/><h2>Define Documentation</h2>
<a class="anchor" id="a6ed742001748dc3dce1411716660b1e3"></a><!-- doxytag: member="xnandps_bbm.h::BBM_H" ref="a6ed742001748dc3dce1411716660b1e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BBM_H</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7f1a2e914cdaa10ad2c730958cbffc98"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BB_PATTERN" ref="a7f1a2e914cdaa10ad2c730958cbffc98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BB_PATTERN&nbsp;&nbsp;&nbsp;0xFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block pattern to search in a page </p>

</div>
</div>
<a class="anchor" id="a89b88c9d4f553dcac407ca987afaa775"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BB_PATTERN_LENGTH_LARGE_PAGE" ref="a89b88c9d4f553dcac407ca987afaa775" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BB_PATTERN_LENGTH_LARGE_PAGE&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block pattern length </p>

</div>
</div>
<a class="anchor" id="afed66cfe949f16e69c3a99b0183183d9"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BB_PATTERN_LENGTH_SMALL_PAGE" ref="afed66cfe949f16e69c3a99b0183183d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BB_PATTERN_LENGTH_SMALL_PAGE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block pattern length </p>

</div>
</div>
<a class="anchor" id="abc8529210c261e24ffbeae2ec2774702"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BB_PATTERN_OFFSET_LARGE_PAGE" ref="abc8529210c261e24ffbeae2ec2774702" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BB_PATTERN_OFFSET_LARGE_PAGE&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block pattern offset in a large page </p>

</div>
</div>
<a class="anchor" id="a923e66dcd7aa633f9d7834f37366a7ef"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BB_PATTERN_OFFSET_SMALL_PAGE" ref="a923e66dcd7aa633f9d7834f37366a7ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BB_PATTERN_OFFSET_SMALL_PAGE&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block pattern offset in a page </p>

</div>
</div>
<a class="anchor" id="a6b09191846a32df39daaa50cb7e7ab0a"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_BLOCK_SHIFT" ref="a6b09191846a32df39daaa50cb7e7ab0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_BLOCK_SHIFT&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block shift value for a block in BBT </p>

</div>
</div>
<a class="anchor" id="a7ea379639132add0b9fa16f9f5faddc9"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_DESC_MAX_BLOCKS" ref="a7ea379639132add0b9fa16f9f5faddc9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_DESC_MAX_BLOCKS&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block Table max blocks </p>

</div>
</div>
<a class="anchor" id="a4b345667d0e5773945afba7f32e71197"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_DESC_PAGE_OFFSET" ref="a4b345667d0e5773945afba7f32e71197" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_DESC_PAGE_OFFSET&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Page offset of Bad Block Table Desc </p>

</div>
</div>
<a class="anchor" id="a13ccee0248f97c8797d2d8cc91c9c235"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_DESC_SIG_LEN" ref="a13ccee0248f97c8797d2d8cc91c9c235" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_DESC_SIG_LEN&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block Table signature length </p>

</div>
</div>
<a class="anchor" id="a574ae11e1b61cbe8c252809811b7e9a4"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_DESC_SIG_OFFSET" ref="a574ae11e1b61cbe8c252809811b7e9a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_DESC_SIG_OFFSET&nbsp;&nbsp;&nbsp;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad Block Table signature offset </p>

</div>
</div>
<a class="anchor" id="aab896c9f1fca0c7c89748f5e8fef9f28"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_DESC_VER_OFFSET" ref="aab896c9f1fca0c7c89748f5e8fef9f28" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_DESC_VER_OFFSET&nbsp;&nbsp;&nbsp;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Bad block Table version offset </p>

</div>
</div>
<a class="anchor" id="a7bdde5a8f13f65b23cc2d3382c8ab884"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_ENTRY_NUM_BLOCKS" ref="a7bdde5a8f13f65b23cc2d3382c8ab884" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_ENTRY_NUM_BLOCKS&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Num of blocks in one BBT entry </p>

</div>
</div>
<a class="anchor" id="a5457296025d8fd9a120bb91e9d758127"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BBT_SCAN_2ND_PAGE" ref="a5457296025d8fd9a120bb91e9d758127" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BBT_SCAN_2ND_PAGE&nbsp;&nbsp;&nbsp;0x00000001</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Scan the second page for bad block information </p>

</div>
</div>
<a class="anchor" id="a820a56f0443165ef4e45daafb8bfb604"></a><!-- doxytag: member="xnandps_bbm.h::XNandPs_BbtBlockShift" ref="a820a56f0443165ef4e45daafb8bfb604" args="(Block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNandPs_BbtBlockShift</td>
          <td>(</td>
          <td class="paramtype">Block&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((Block * 2) &amp; XNANDPS_BLOCK_SHIFT_MASK)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This macro returns the Block shift value corresponding to a Block.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Block</em>&nbsp;</td><td>is the block number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Block shift value</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="a52a13ba6c5dc5ae22cad93b73ec66503"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_BAD" ref="a52a13ba6c5dc5ae22cad93b73ec66503" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_BAD&nbsp;&nbsp;&nbsp;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block is bad </p>

</div>
</div>
<a class="anchor" id="ad4781005bbcccdccba1bd02497925ec4"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_FACTORY_BAD" ref="ad4781005bbcccdccba1bd02497925ec4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_FACTORY_BAD&nbsp;&nbsp;&nbsp;0x3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Factory marked bad block </p>

</div>
</div>
<a class="anchor" id="a8ffc4c5be52b4ca7d07c2b5a159bec99"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_GOOD" ref="a8ffc4c5be52b4ca7d07c2b5a159bec99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_GOOD&nbsp;&nbsp;&nbsp;0x0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block is good </p>

</div>
</div>
<a class="anchor" id="aa6ac6d803ac18454c61045a7aef97920"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_RESERVED" ref="aa6ac6d803ac18454c61045a7aef97920" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_RESERVED&nbsp;&nbsp;&nbsp;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reserved block </p>

</div>
</div>
<a class="anchor" id="af7c432bad01dd727f91f1f0435f92cac"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_SHIFT_MASK" ref="af7c432bad01dd727f91f1f0435f92cac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_SHIFT_MASK&nbsp;&nbsp;&nbsp;0x06</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block shift mask for a Bad Block Table entry byte </p>

</div>
</div>
<a class="anchor" id="ac547ca7c91b79d5437cf58f29c0fda1e"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_BLOCK_TYPE_MASK" ref="ac547ca7c91b79d5437cf58f29c0fda1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_BLOCK_TYPE_MASK&nbsp;&nbsp;&nbsp;0x03</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block type mask </p>

</div>
</div>
<a class="anchor" id="a27509962745af9175e06726f033d0796"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_FLASH_BLOCK_BAD" ref="a27509962745af9175e06726f033d0796" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_FLASH_BLOCK_BAD&nbsp;&nbsp;&nbsp;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block is bad </p>

</div>
</div>
<a class="anchor" id="a54d601640a21f22188696844fc7b312c"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_FLASH_BLOCK_FACTORY_BAD" ref="a54d601640a21f22188696844fc7b312c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_FLASH_BLOCK_FACTORY_BAD&nbsp;&nbsp;&nbsp;0x0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Factory marked bad block </p>

</div>
</div>
<a class="anchor" id="acd3b0fdad08c44639c327ad0afdc1b7e"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_FLASH_BLOCK_GOOD" ref="acd3b0fdad08c44639c327ad0afdc1b7e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_FLASH_BLOCK_GOOD&nbsp;&nbsp;&nbsp;0x3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Block is good </p>

</div>
</div>
<a class="anchor" id="aab0ab3b8f4cc986ba9c7e2ddea945190"></a><!-- doxytag: member="xnandps_bbm.h::XNANDPS_FLASH_BLOCK_RESERVED" ref="aab0ab3b8f4cc986ba9c7e2ddea945190" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XNANDPS_FLASH_BLOCK_RESERVED&nbsp;&nbsp;&nbsp;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reserved block </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5744d2e6e03eb2b815771cf660ab2e11"></a><!-- doxytag: member="xnandps_bbm.h::XNandPs_IsBlockBad" ref="a5744d2e6e03eb2b815771cf660ab2e11" args="(XNandPs *InstancePtr, u32 Block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XNandPs_IsBlockBad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_nand_ps_tag.html">XNandPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks whether a block is bad or not.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the XNandPs instance.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Block</em>&nbsp;</td><td>is the block number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if successful.</li>
<li>XST_FAILURE if fail. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a65ec4f2496ae641d1306089dff5416b2"></a><!-- doxytag: member="xnandps_bbm.h::XNandPs_MarkBlockBad" ref="a65ec4f2496ae641d1306089dff5416b2" args="(XNandPs *InstancePtr, u32 Block)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XNandPs_MarkBlockBad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_nand_ps_tag.html">XNandPs</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Block</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function marks a block as bad in the RAM based Bad Block Table(BBT). It also updates the Bad Block Table(BBT) in the flash.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is the pointer to the XNandPs instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Block</em>&nbsp;</td><td>is the block number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if successful.</li>
<li>XST_FAILURE if fail. </li>
</ul>
</dd></dl>

</div>
</div>
</div>
<p class="Copyright">
Copyright &copy; 1995-2014 Xilinx, Inc. All rights reserved.
</p>
</body>
</html>
